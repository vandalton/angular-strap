{"version":3,"sources":["modules/popover.js"],"names":["angular","templateUrl","provider","contentTemplate","defaults","trigger","keyboard","html","title","content","delay","autoClose","this","$get","options","$popover","PopoverFactory","element","config","$tooltip","restrict","directive","requestAnimationFrame","$window","link","scope","forEach","attr","falseValueRegExp","key","bsKey","isDefined","charAt","toUpperCase","slice","test","dataTarget","target","$eval","$observe","newValue","oldValue","$sce","trustAsHtml","$watch","bsPopover","$applyPlacement","popover","extend","bsShow","isString","match","bsEnabled","viewport","setViewport","$on","destroy"],"mappings":"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","file":"popover.min.js","sourcesContent":["'use strict';\r\n\r\nangular.module('mgcrea.ngStrap.popover', ['mgcrea.ngStrap.tooltip'])\r\n\r\n  .provider('$popover', function () {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-fade',\r\n      customClass: '',\r\n      // uncommenting the next two lines will break backwards compatability\r\n      // prefixClass: 'popover',\r\n      // prefixEvent: 'popover',\r\n      container: false,\r\n      target: false,\r\n      placement: 'right',\r\n      templateUrl: 'popover/popover.tpl.html',\r\n      contentTemplate: false,\r\n      trigger: 'click',\r\n      keyboard: true,\r\n      html: false,\r\n      title: '',\r\n      content: '',\r\n      delay: 0,\r\n      autoClose: false\r\n    };\r\n\r\n    this.$get = function ($tooltip) {\r\n\r\n      function PopoverFactory (element, config) {\r\n\r\n        // Common vars\r\n        var options = angular.extend({}, defaults, config);\r\n\r\n        var $popover = $tooltip(element, options);\r\n\r\n        // Support scope as string options [/*title, */content]\r\n        if (options.content) {\r\n          $popover.$scope.content = options.content;\r\n        }\r\n\r\n        return $popover;\r\n\r\n      }\r\n\r\n      return PopoverFactory;\r\n\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsPopover', function ($window, $sce, $popover) {\r\n\r\n    var requestAnimationFrame = $window.requestAnimationFrame || $window.setTimeout;\r\n\r\n    return {\r\n      restrict: 'EAC',\r\n      scope: true,\r\n      link: function postLink (scope, element, attr) {\r\n\r\n        var popover;\r\n        // Directive options\r\n        var options = {scope: scope};\r\n        angular.forEach(['template', 'templateUrl', 'controller', 'controllerAs', 'contentTemplate', 'placement', 'container', 'delay', 'trigger', 'html', 'animation', 'customClass', 'autoClose', 'id', 'prefixClass', 'prefixEvent', 'bsEnabled'], function (key) {\r\n          if (angular.isDefined(attr[key])) options[key] = attr[key];\r\n        });\r\n\r\n        // use string regex match boolean attr falsy values, leave truthy values be\r\n        var falseValueRegExp = /^(false|0|)$/i;\r\n        angular.forEach(['html', 'container', 'autoClose'], function (key) {\r\n          if (angular.isDefined(attr[key]) && falseValueRegExp.test(attr[key])) options[key] = false;\r\n        });\r\n\r\n        // bind functions from the attrs to the show and hide events\r\n        angular.forEach(['onBeforeShow', 'onShow', 'onBeforeHide', 'onHide'], function (key) {\r\n          var bsKey = 'bs' + key.charAt(0).toUpperCase() + key.slice(1);\r\n          if (angular.isDefined(attr[bsKey])) {\r\n            options[key] = scope.$eval(attr[bsKey]);\r\n          }\r\n        });\r\n\r\n        // should not parse target attribute (anchor tag), only data-target #1454\r\n        var dataTarget = element.attr('data-target');\r\n        if (angular.isDefined(dataTarget)) {\r\n          if (falseValueRegExp.test(dataTarget)) {\r\n            options.target = false;\r\n          } else {\r\n            options.target = dataTarget;\r\n          }\r\n        }\r\n\r\n        // Support scope as data-attrs\r\n        angular.forEach(['title', 'content'], function (key) {\r\n          if (attr[key]) {\r\n            attr.$observe(key, function (newValue, oldValue) {\r\n              scope[key] = $sce.trustAsHtml(newValue);\r\n              if (angular.isDefined(oldValue)) {\r\n                requestAnimationFrame(function () {\r\n                  if (popover) popover.$applyPlacement();\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n\r\n        // Support scope as an object\r\n        if (attr.bsPopover) {\r\n          scope.$watch(attr.bsPopover, function (newValue, oldValue) {\r\n            if (angular.isObject(newValue)) {\r\n              angular.extend(scope, newValue);\r\n            } else {\r\n              scope.content = newValue;\r\n            }\r\n            if (angular.isDefined(oldValue)) {\r\n              requestAnimationFrame(function () {\r\n                if (popover) popover.$applyPlacement();\r\n              });\r\n            }\r\n          }, true);\r\n        }\r\n\r\n        // Visibility binding support\r\n        if (attr.bsShow) {\r\n          scope.$watch(attr.bsShow, function (newValue, oldValue) {\r\n            if (!popover || !angular.isDefined(newValue)) return;\r\n            if (angular.isString(newValue)) newValue = !!newValue.match(/true|,?(popover),?/i);\r\n            if (newValue === true) {\r\n              popover.show();\r\n            } else {\r\n              popover.hide();\r\n            }\r\n          });\r\n        }\r\n\r\n        // Enabled binding support\r\n        if (attr.bsEnabled) {\r\n          scope.$watch(attr.bsEnabled, function (newValue) {\r\n            if (!popover || !angular.isDefined(newValue)) return;\r\n            if (angular.isString(newValue)) newValue = !!newValue.match(/true|1|,?(popover),?/i);\r\n            if (newValue === false) {\r\n              popover.setEnabled(false);\r\n            } else {\r\n              popover.setEnabled(true);\r\n            }\r\n          });\r\n        }\r\n\r\n        // Viewport support\r\n        if (attr.viewport) {\r\n          scope.$watch(attr.viewport, function (newValue) {\r\n            if (!popover || !angular.isDefined(newValue)) return;\r\n            popover.setViewport(newValue);\r\n          });\r\n        }\r\n\r\n        // Initialize popover\r\n        popover = $popover(element, options);\r\n\r\n        // Garbage collection\r\n        scope.$on('$destroy', function () {\r\n          if (popover) popover.destroy();\r\n          options = null;\r\n          popover = null;\r\n        });\r\n\r\n      }\r\n    };\r\n\r\n  });\r\n"]}