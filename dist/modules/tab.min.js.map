{"version":3,"sources":["modules/tab.js"],"names":["angular","_tabsHash","_addTabControl","animation","template","navClass","controller","activeClass","this","isDefined","$attrs","key","control","$scope","$activeClass","$options","self","$panes","$activePaneChangeListeners","$push","pane","isUndefined","$active","$navClass","$remove","index","active","activeIndex","indexOf","splice","map","$setActive","length","value","name","fn","$pane","$onKeyPress","e","$isActive","$index","$tab","defaults","$get","directive","scope","require","transclude","templateUrl","attr","link","postLink","ngModelCtrl","bsTabsCtrl","tabKey","undefined","addTabControl","controllers","$setViewValue","$formatters","modelValue","push","attrs","bsActivePane","parsedBsActivePane","assign","$parse","$watch","newValue","oldValue","$observe","render","$animate","element","addClass","disabled"],"mappings":"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","file":"tab.min.js","sourcesContent":["'use strict';\r\n\r\nangular.module('mgcrea.ngStrap.tab', [])\r\n\r\n  .provider('$tab', function () {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-fade',\r\n      template: 'tab/tab.tpl.html',\r\n      navClass: 'nav-tabs',\r\n      activeClass: 'active'\r\n    };\r\n    var _tabsHash = {};\r\n\r\n    var _addTabControl = function (key, control) {\r\n      if (!_tabsHash[key]) _tabsHash[key] = control;\r\n    };\r\n\r\n    var controller = this.controller = function ($scope, $element, $attrs) {\r\n      var self = this;\r\n\r\n      // Attributes options\r\n      self.$options = angular.copy(defaults);\r\n      angular.forEach(['animation', 'navClass', 'activeClass'], function (key) {\r\n        if (angular.isDefined($attrs[key])) self.$options[key] = $attrs[key];\r\n      });\r\n\r\n      // Publish options on scope\r\n      $scope.$navClass = self.$options.navClass;\r\n      $scope.$activeClass = self.$options.activeClass;\r\n\r\n      self.$panes = $scope.$panes = [];\r\n\r\n      // Please use $activePaneChangeListeners if you use `bsActivePane`\r\n      // Because we removed `ngModel` as default, we rename viewChangeListeners to\r\n      // activePaneChangeListeners to make more sense.\r\n      self.$activePaneChangeListeners = self.$viewChangeListeners = [];\r\n\r\n      self.$push = function (pane) {\r\n        if (angular.isUndefined(self.$panes.$active)) {\r\n          $scope.$setActive(pane.name || 0);\r\n        }\r\n        self.$panes.push(pane);\r\n      };\r\n\r\n      self.$remove = function (pane) {\r\n        var index = self.$panes.indexOf(pane);\r\n        var active = self.$panes.$active;\r\n        var activeIndex;\r\n        if (angular.isString(active)) {\r\n          activeIndex = self.$panes.map(function (pane) {\r\n            return pane.name;\r\n          }).indexOf(active);\r\n        } else {\r\n          activeIndex = self.$panes.$active;\r\n        }\r\n\r\n        // remove pane from $panes array\r\n        self.$panes.splice(index, 1);\r\n\r\n        if (index < activeIndex) {\r\n          // we removed a pane before the active pane, so we need to\r\n          // decrement the active pane index\r\n          activeIndex--;\r\n        } else if (index === activeIndex && activeIndex === self.$panes.length) {\r\n          // we remove the active pane and it was the one at the end,\r\n          // so select the previous one\r\n          activeIndex--;\r\n        }\r\n        if (activeIndex >= 0 && activeIndex < self.$panes.length) {\r\n          self.$setActive(self.$panes[activeIndex].name || activeIndex);\r\n        } else {\r\n          self.$setActive();\r\n        }\r\n      };\r\n\r\n      self.$setActive = $scope.$setActive = function (value) {\r\n        self.$panes.$active = value;\r\n        self.$activePaneChangeListeners.forEach(function (fn) {\r\n          fn();\r\n        });\r\n      };\r\n\r\n      self.$isActive = $scope.$isActive = function ($pane, $index) {\r\n        return self.$panes.$active === $pane.name || self.$panes.$active === $index;\r\n      };\r\n\r\n      self.$onKeyPress = $scope.$onKeyPress = function (e, index) {\r\n        if (e.keyCode === 32 || e.charCode === 32 || e.keyCode === 13 || e.charCode === 13) {\r\n          self.$setActive(index);\r\n        }\r\n      };\r\n    };\r\n\r\n    this.$get = function () {\r\n      var $tab = {};\r\n      $tab.defaults = defaults;\r\n      $tab.controller = controller;\r\n      $tab.addTabControl = _addTabControl;\r\n      $tab.tabsHash = _tabsHash;\r\n      return $tab;\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsTabs', function ($window, $animate, $tab, $parse) {\r\n\r\n    var defaults = $tab.defaults;\r\n\r\n    return {\r\n      require: ['?ngModel', 'bsTabs'],\r\n      transclude: true,\r\n      scope: true,\r\n      controller: ['$scope', '$element', '$attrs', $tab.controller],\r\n      templateUrl: function (element, attr) {\r\n        return attr.template || defaults.template;\r\n      },\r\n      link: function postLink (scope, element, attrs, controllers) {\r\n\r\n        var ngModelCtrl = controllers[0];\r\n        var bsTabsCtrl = controllers[1];\r\n\r\n        // Add a way for developers to access tab scope if needed.  This allows for more fine grained control over what\r\n        // tabs are available in the tab component\r\n        if (attrs.tabKey !== '' && attrs.tabKey !== undefined) {\r\n          $tab.addTabControl(attrs.tabKey, bsTabsCtrl);\r\n        }\r\n\r\n        // 'ngModel' does interfere with form validation\r\n        // and status, use `bsActivePane` instead to avoid it\r\n        if (ngModelCtrl) {\r\n\r\n          // Update the modelValue following\r\n          bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n            ngModelCtrl.$setViewValue(bsTabsCtrl.$panes.$active);\r\n          });\r\n\r\n          // modelValue -> $formatters -> viewValue\r\n          ngModelCtrl.$formatters.push(function (modelValue) {\r\n            // console.warn('$formatter(\"%s\"): modelValue=%o (%o)', element.attr('ng-model'), modelValue, typeof modelValue);\r\n            bsTabsCtrl.$setActive(modelValue);\r\n            return modelValue;\r\n          });\r\n\r\n        }\r\n\r\n        if (attrs.bsActivePane) {\r\n          // adapted from angularjs ngModelController bindings\r\n          // https://github.com/angular/angular.js/blob/v1.3.1/src%2Fng%2Fdirective%2Finput.js#L1730\r\n          var parsedBsActivePane = $parse(attrs.bsActivePane);\r\n\r\n          // Update bsActivePane value with change\r\n          bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n            parsedBsActivePane.assign(scope, bsTabsCtrl.$panes.$active);\r\n          });\r\n\r\n          // watch bsActivePane for value changes\r\n          scope.$watch(attrs.bsActivePane, function (newValue, oldValue) {\r\n            bsTabsCtrl.$setActive(newValue);\r\n          }, true);\r\n        }\r\n      }\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsPane', function ($window, $animate, $sce) {\r\n\r\n    return {\r\n      require: ['^?ngModel', '^bsTabs'],\r\n      scope: true,\r\n      link: function postLink (scope, element, attrs, controllers) {\r\n\r\n        // var ngModelCtrl = controllers[0];\r\n        var bsTabsCtrl = controllers[1];\r\n\r\n        // Add base class\r\n        element.addClass('tab-pane');\r\n\r\n        // Observe title attribute for change\r\n        attrs.$observe('title', function (newValue, oldValue) {\r\n          scope.title = $sce.trustAsHtml(newValue);\r\n        });\r\n\r\n        // Save tab name into scope\r\n        scope.name = attrs.name;\r\n\r\n        // Add animation class\r\n        if (bsTabsCtrl.$options.animation) {\r\n          element.addClass(bsTabsCtrl.$options.animation);\r\n        }\r\n\r\n        attrs.$observe('disabled', function (newValue, oldValue) {\r\n          scope.disabled = scope.$eval(newValue);\r\n        });\r\n\r\n        // Push pane to parent bsTabs controller\r\n        bsTabsCtrl.$push(scope);\r\n\r\n        // remove pane from tab controller when pane is destroyed\r\n        scope.$on('$destroy', function () {\r\n          bsTabsCtrl.$remove(scope);\r\n        });\r\n\r\n        function render () {\r\n          var index = bsTabsCtrl.$panes.indexOf(scope);\r\n          $animate[bsTabsCtrl.$isActive(scope, index) ? 'addClass' : 'removeClass'](element, bsTabsCtrl.$options.activeClass);\r\n        }\r\n\r\n        bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n          render();\r\n        });\r\n        render();\r\n\r\n      }\r\n    };\r\n\r\n  });\r\n"]}